<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Test M√£ M√†u - 2 Chi·ªÅu</title>
<style>
body {
font-family: 'Roboto', sans-serif;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
height: 100vh;
margin: 0;
background-color: #f0f0f0;
}
.container {
background: white;
padding: 20px;
border-radius: 10px;
box-shadow: 0 0 10px rgba(0,0,0,0.1);
text-align: center;
max-width: 400px;
}
.slider-group {
margin: 10px 0;
}
.slider {
width: 200px;
}
.color-display {
width: 200px;
height: 200px;
border: 2px solid #ccc;
margin: 20px auto;
border-radius: 5px;
}
.code-group {
margin: 10px 0;
}
.code-input {
width: 200px;
padding: 5px;
font-size: 14px;
text-align: center;
margin-bottom: 5px;
}
h1 {
  margin: 0;
  font-size: clamp(1.4rem, 4vw, 2.1rem);
  letter-spacing: 1px;
  text-transform: uppercase;
  color: white;
  line-height: 1.3;
  text-shadow:
    0.5px 0.5px 1.5px rgba(0, 0, 255, 0.9),
    1px 1px 2px rgba(0, 0, 0, 0.9),
    0.5px 0.5px 1px rgba(255, 255, 255, 0.6);
    }
button {
padding: 5px 10px;background-color: #007bff;
color: white;
border: none;
border-radius: 3px;
cursor: pointer;
font-size: 12px;
}
button:hover {
background-color: #0056b3;
}
.error {
color: red;
font-size: 12px;
margin-top: 5px;
display: none;
}
</style>
</head>
<body>
<div class="container">
<h1>Test M√£ M√†u - 2 Chi·ªÅu</h1>
<div class="slider-group">
<label for="red">Red (0-255): <span id="red-value">128</span></label><br>
<input type="range" id="red" class="slider" min="0" max="255" value="128">
</div>
<div class="slider-group">
<label for="green">Green (0-255): <span id="green-value">128</span></label><br>
<input type="range" id="green" class="slider" min="0" max="255" value="128">
</div>
<div class="slider-group">
<label for="blue">Blue (0-255): <span id="blue-value">128</span></label><br>
<input type="range" id="blue" class="slider" min="0" max="255" value="128">
</div>
<div class="slider-group">
<label for="alpha">Alpha (0-1): <span id="alpha-value">1</span></label><br>
<input type="range" id="alpha" class="slider" min="0" max="1" step="0.01" value="1">
</div>
<div class="color-display" id="color-display"></div>
<div class="code-group">
<label>M√£ m√†u CSS (RGBA):</label><br>
<input type="text" id="rgba-input" class="code-input">
<button type="button" onclick="copyCode('rgba-input')">Sao ch√©p</button>
<div class="error" id="rgba-error">M√£ RGBA kh√¥ng h·ª£p l·ªá</div>
</div>
<div class="code-group">
<label>M√£ m√†u HTML (HEX):</label><br>
<input type="text" id="hex-input" class="code-input">
<button type="button" onclick="copyCode('hex-input')">Sao ch√©p</button>
<div class="error" id="hex-error">M√£ HEX kh√¥ng h·ª£p l·ªá</div>
</div><div class="code-group">
<label>M√£ m√†u CSS (HSL):</label><br>
<input type="text" id="hsl-input" class="code-input">
<button type="button" onclick="copyCode('hsl-input')">Sao ch√©p</button>
<div class="error" id="hsl-error">M√£ HSL kh√¥ng h·ª£p l·ªá</div>
</div>
</div>
<script>
const redSlider = document.getElementById('red');
const greenSlider = document.getElementById('green');
const blueSlider = document.getElementById('blue');
const alphaSlider = document.getElementById('alpha');
const redValue = document.getElementById('red-value');
const greenValue = document.getElementById('green-value');
const blueValue = document.getElementById('blue-value');
const alphaValue = document.getElementById('alpha-value');
const colorDisplay = document.getElementById('color-display');
const rgbaInput = document.getElementById('rgba-input');
const hexInput = document.getElementById('hex-input');
const hslInput = document.getElementById('hsl-input');

// --- Chuy·ªÉn ƒë·ªïi ---
function rgbToHex(r, g, b, a = 1) {
  let hex = "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();
  if (a < 1) {
    const alphaHex = Math.round(a * 255).toString(16).padStart(2, '0').toUpperCase();
    hex += alphaHex;
  }
  return hex;
}

function hexToRgb(hex) {
  hex = hex.trim();
  if (!/^#[a-f\d]{3,8}$/i.test(hex)) return null;

  let r, g, b, a = 1;
  const shorthand = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
  const shorthandAlpha = /^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i;

  if (shorthand.test(hex)) {
    hex = hex.replace(shorthand, (m, r, g, b) => r + r + g + g + b + b);
  } else if (shorthandAlpha.test(hex)) {
    hex = hex.replace(shorthandAlpha, (m, r, g, b, a) => r + r + g + g + b + b + a + a);
  }

  if (hex.length === 7) {
    // #RRGGBB
    r = parseInt(hex.slice(1, 3), 16);
    g = parseInt(hex.slice(3, 5), 16);
    b = parseInt(hex.slice(5, 7), 16);  } else if (hex.length === 9) {
    // #RRGGBBAA
    r = parseInt(hex.slice(1, 3), 16);
    g = parseInt(hex.slice(3, 5), 16);
    b = parseInt(hex.slice(5, 7), 16);
    a = parseInt(hex.slice(7, 9), 16) / 255;
  } else {
    return null;
  }

  return { r, g, b, a };
}

function rgbToHsl(r, g, b) {
  r /= 255; g /= 255; b /= 255;
  const max = Math.max(r, g, b), min = Math.min(r, g, b);
  let h, s, l = (max + min) / 2;

  if (max === min) {
    h = s = 0;
  } else {
    const d = max - min;
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
    switch (max) {
      case r: h = (g - b) / d + (g < b ? 6 : 0); break;
      case g: h = (b - r) / d + 2; break;
      case b: h = (r - g) / d + 4; break;
    }
    h /= 6;
  }
  return [Math.round(h * 360), Math.round(s * 100), Math.round(l * 100)];
}

function hslToRgb(h, s, l, a = 1) {
  s /= 100; l /= 100;
  const c = (1 - Math.abs(2 * l - 1)) * s;
  const x = c * (1 - Math.abs((h / 60) % 2 - 1));
  const m = l - c / 2;
  let r, g, b;

  if (0 <= h && h < 60) [r, g, b] = [c, x, 0];
  else if (60 <= h && h < 120) [r, g, b] = [x, c, 0];
  else if (120 <= h && h < 180) [r, g, b] = [0, c, x];
  else if (180 <= h && h < 240) [r, g, b] = [0, x, c];
  else if (240 <= h && h < 300) [r, g, b] = [x, 0, c];
  else if (300 <= h && h < 360) [r, g, b] = [c, 0, x];
  else [r, g, b] = [0, 0, 0];

  r = Math.round((r + m) * 255);
  g = Math.round((g + m) * 255);  b = Math.round((b + m) * 255);
  return { r, g, b, a };
}

function parseRgba(str) {
  const regex = /^rgba?\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*([\d.]+)\s*)?\)$/i;
  const match = str.match(regex);
  if (!match) return null;
  const r = parseInt(match[1]);
  const g = parseInt(match[2]);
  const b = parseInt(match[3]);
  const a = match[4] !== undefined ? parseFloat(match[4]) : 1;
  if (r > 255 || g > 255 || b > 255 || a > 1 || a < 0) return null;
  return { r, g, b, a };
}

function parseHsla(str) {
  const regex = /^hsla?\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*([\d.]+)\s*)?\)$/i;
  const match = str.match(regex);
  if (!match) return null;
  const h = parseInt(match[1]) % 360;
  const s = parseInt(match[2]);
  const l = parseInt(match[3]);
  const a = match[4] !== undefined ? parseFloat(match[4]) : 1;
  if (s > 100 || l > 100 || a > 1 || a < 0) return null;
  return hslToRgb(h, s, l, a);
}

// --- C·∫≠p nh·∫≠t UI t·ª´ gi√° tr·ªã RGB/Alpha ---
function updateUI(r, g, b, a) {
  redSlider.value = r;
  greenSlider.value = g;
  blueSlider.value = b;
  alphaSlider.value = a;
  redValue.textContent = r;
  greenValue.textContent = g;
  blueValue.textContent = b;
  alphaValue.textContent = a;

  colorDisplay.style.backgroundColor = `rgba(${r}, ${g}, ${b}, ${a})`;
  rgbaInput.value = `rgba(${r}, ${g}, ${b}, ${a})`;
  hexInput.value = rgbToHex(r, g, b, a);
  const [h, s, l] = rgbToHsl(r, g, b);
  hslInput.value = `hsl(${h}, ${s}%, ${l}%)`;
}

// --- C·∫≠p nh·∫≠t t·ª´ slider ---
function updateColorFromSliders() {
  const r = parseInt(redSlider.value);
  const g = parseInt(greenSlider.value);  const b = parseInt(blueSlider.value);
  const a = parseFloat(alphaSlider.value);
  updateUI(r, g, b, a);
}

// --- X·ª≠ l√Ω nh·∫≠p t·ª´ input ---
function handleInput(event, inputId, errorId) {
  event.preventDefault(); // üîí NgƒÉn cu·ªôn trang
  const input = document.getElementById(inputId);
  const errorEl = document.getElementById(errorId);
  const value = input.value.trim();

  errorEl.style.display = 'none';
  if (!value) return;

  let result = null;
  if (inputId === 'hex-input') {
    result = hexToRgb(value);
  } else if (inputId === 'rgba-input') {
    result = parseRgba(value);
  } else if (inputId === 'hsl-input') {
    result = parseHsla(value);
  }

  if (result) {
    updateUI(result.r, result.g, result.b, result.a);
  } else {
    errorEl.style.display = 'block';
  }
}

function copyCode(inputId) {
  const input = document.getElementById(inputId);
  input.select();
  document.execCommand('copy');
  alert('M√£ ƒë√£ ƒë∆∞·ª£c sao ch√©p!');
}

// --- G·∫Øn s·ª± ki·ªán ---
redSlider.addEventListener('input', updateColorFromSliders);
greenSlider.addEventListener('input', updateColorFromSliders);
blueSlider.addEventListener('input', updateColorFromSliders);
alphaSlider.addEventListener('input', updateColorFromSliders);

rgbaInput.addEventListener('input', (e) => handleInput(e, 'rgba-input', 'rgba-error'));
hexInput.addEventListener('input', (e) => handleInput(e, 'hex-input', 'hex-error'));
hslInput.addEventListener('input', (e) => handleInput(e, 'hsl-input', 'hsl-error'));

// Kh·ªüi t·∫°o
updateColorFromSliders();</script>
</body>
</html>
